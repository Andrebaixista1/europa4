              </select>
            </div>
            <div className="col-12 col-md-auto ms-md-auto d-flex gap-2 justify-content-end flex-nowrap">
              <button className="btn btn-ghost btn-sm" onClick={() => { setSearch(''); setGrupo(''); setStatus(''); setRenovacaoDe(''); setRenovacaoAte(''); setVencimentoDe(''); setVencimentoAte(''); }}>
                <Fi.FiX className="me-1" />
                <span className="d-none d-sm-inline">Limpar</span>
              </button>
              <button className="btn btn-ghost btn-ghost-primary btn-sm" onClick={load} disabled={isLoading}>
                <Fi.FiRefreshCcw className="me-1" />
                <span className="d-none d-sm-inline">Atualizar</span>
              </button>
              <button className="btn btn-ghost btn-ghost-info btn-sm" onClick={downloadCsv} disabled={isLoading}>
                <Fi.FiDownload className="me-1" />
                <span className="d-none d-sm-inline">Download</span>
              </button>
              <button className="btn btn-ghost btn-ghost-primary btn-sm" disabled title="Apenas Supervisor pode adicionar">
                <Fi.FiPlus className="me-1" />
                <span className="d-none d-sm-inline">Adicionar</span>
              </button>
            </div>
          </div>
        </div>

        <div className="small opacity-75 mb-2">Mostrando {filtered.length} de {items.length} usuarios</div>

        <div className="neo-card neo-lg p-0">
          {isLoading && (<div className="p-4 text-center opacity-75">Carregando...</div>)}
          {error && (<div className="p-4 alert alert-danger">{String(error)}</div>)}
          {!isLoading && !error && (
            <div className="table-responsive">
              <table className="table table-dark table-hover align-middle mb-0">
                <thead>
                  <tr>
                    <th style={{width:80}}>ID</th>
                    <th>AGENCIA</th>
                    <th>LOGIN</th>
                    <th>EMPRESA</th>
                    <th>GRUPO</th>
                    <th>DATA RENOVACAO</th>
                    <th>DATA VENCIMENTO</th>
                    <th>STATUS</th>
                    <th>AÇÕES</th>
                  </tr>
                </thead>
                <tbody>
                  {filtered.length === 0 && (
                    <tr><td colSpan={9} className="text-center opacity-75 p-4">Sem registros</td></tr>
                  )}
                  {filtered.map((i) => (
                    <tr key={i.id}>
                      <td>{i.id}</td>
                      <td>{i.codigo}</td>
                      <td className="text-uppercase">{i.login}</td>
                      <td className="text-uppercase">{i.empresa || i.nome}</td>
                      <td className="text-uppercase">{i.grupo}</td>
                      <td>{i.renovacao ? new Date(i.renovacao).toLocaleDateString('pt-BR') : '-'}</td>
                      <td>{i.vencimento ? new Date(i.vencimento).toLocaleDateString('pt-BR') : '-'}</td>
                      <td><Badge status={i.status} /></td>
                      <td>
                        <div className="d-flex gap-2">
                          <button className="btn btn-ghost btn-ghost-primary btn-icon d-inline-flex align-items-center justify-content-center" disabled={user?.role !== 'Master' || renewingId === i.id} title={user?.role === 'Master' ? 'Renovar' : 'Apenas Master'} aria-label="Renovar" onClick={() => handleRenovar(i)}>
                            <Fi.FiRotateCcw />
                          </button>
                          <button className="btn btn-ghost btn-ghost-danger btn-icon d-inline-flex align-items-center justify-content-center" disabled={user?.role !== 'Master' || inactivatingId === i.id} title={user?.role === 'Master' ? 'Inativar' : 'Apenas Master'} aria-label="Inativar" onClick={() => handleInativar(i)}>
                            <Fi.FiUserX />
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}
        </div>
      </main>
      <Footer />
    </div>
  )
}
